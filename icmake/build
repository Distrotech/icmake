#!tmp/icmake -qt /tmp/icmake

// Undefine the following to compile with an extensive set of flags, for 
// testing purposes only. Leave commented out in normal cases.
#define EXTENSIVE

void main()
{
    string  progs;
    list    progdirs;
    int     idx;
    string  extensive;

#ifdef EXTENSIVE
    extensive = " -e";
#endif

    progs = "make pp comp exec un";
    progdirs = strtok(progs, " ");

    chdir("rss");
    system("./build lib" + extensive);
    
    for (idx = sizeof(progdirs); idx--; )
    {
        chdir("../" + element(idx, progdirs));
        system("./build prog" + extensive);
    }
    exit(0);
}
